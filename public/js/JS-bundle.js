!function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var o={};e.m=t,e.c=o,e.i=function(t){return t},e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=14)}([function(t,e){$.urlParam=function(t){var e=new RegExp("[?&]"+t+"=([^&#]*)").exec(window.location.href);return null==e?null:decodeURI(e[1])||0}},function(t,e){window.notify=function(){var t={};return t.error=function(t){$.notify({message:t},{type:"danger",z_index:9999,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"}})},t.info=function(t){$.notify({message:t},{type:"info",z_index:9999,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"}})},t.warning=function(t){$.notify({message:t},{type:"warning",z_index:9999,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"}})},t.ajaxError=function(e){window.overlay.hide();var o;try{console.log(e),o=JSON.parse(e.responseText)}catch(e){t.error("Es ist ein unerwarteter Fehler aufgetreten!")}if(void 0!==o)for(var n in o)t.error(n+": "+o[n])},t}()},function(t,e){window.overlay=function(){var t={};return t.rootNode=$("#site-overlay"),t.overlayCounter=0,t.show=function(){t.overlayCounter=t.overlayCounter+1,t.overlayCounter>=0&&t.rootNode.show()},t.hide=function(){t.overlayCounter>0&&(t.overlayCounter=t.overlayCounter-1),0===t.overlayCounter&&t.rootNode.hide()},t.reset=function(){t.overlayCounter=0,t.rootNode.hide()},t}(),$(document).ready(function(){window.overlay.hide()})},function(t,e,o){o(0),o(2),o(1),o(8),o(6),o(10),o(11),o(13),o(7),o(12),o(5),o(9)},function(t,e,o){o(0),o(2),o(1),o(15),o(17),o(19),o(20),o(16),o(22),o(26),o(21),o(23),o(24),o(25),o(18)},function(t,e){window.aboDetailsComponent=function(){var t={};return t.init=function(){t.rootNode=$("#abodetails-index"),t.abodetailsForm=t.rootNode.find("#abodetails-form"),t.articleSelect=t.rootNode.find("#article"),t.articletypeSelect=t.rootNode.find("#articletype"),t.origin=t.rootNode.find("#origin"),this.rootNode.one("destroyed",function(){t.dispose()}),t.initBaseEndpoints(),t.initComponents()},t.dispose=function(){},t.initBaseEndpoints=function(){t.baseEndpointArticletypes=function(e){window.overlay.show();var o="/api/articles/"+e;$.get(o).success(t.articletypesLoaded).fail(window.notify.ajaxError)}},t.articletypesLoaded=function(e){e.hasOrigin?t.origin.removeAttr("disabled"):t.origin.attr("disabled","disabled"),t.articletypeSelect.html(""),$.each(e.assignedArticletypes,function(){this.isActive&&t.articletypeSelect.append($("<option />").val(this.id).text(this.price))}),window.overlay.hide()},t.initComponents=function(){$(".input-group.date").datepicker({language:"de",calendarWeeks:!0,autoclose:!0,startDate:"dateToday"}),t.articleSelect.change(function(){t.baseEndpointArticletypes($(this).val())})},t}()},function(t,e){var o=function(){var t={};return t.rootNode=$("#admin-content").find("#abos-index"),t.abosTable=t.rootNode.find("#abosTable"),t.aboDetailsModal=t.rootNode.find("#aboDetailsModal"),t.btnAbodetailsSave=t.aboDetailsModal.find("#btn-abodetails-save"),t.init=function(){this.rootNode.one("destroyed",function(){t.dispose()}),t.initBaseEndpoints(),t.initComponents()},t.dispose=function(){},t.initBaseEndpoints=function(){},t.initComponents=function(){t.abosDataTable=t.abosTable.DataTable({bLengthChange:!1,language:{url:"/js/vendor/i18n/datatables.de.json"},ajax:{url:"/api/articles",dataSrc:function(t){for(var e=new Array,o=0;o<t.length;o++)e.push([t[o].name,t[o].description,t[o].price,'<img class="article--table--image" src="'+t[o].imagepath+'" />','<button type="button" data-article-id="'+t[o].id+'" class="btn btn-default btn-sm btn-action"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button>']);return e}},initComplete:function(e,o){t.articlesTable.on("click",".btn-action",function(){t.baseEndpointArticleDetails($(this).attr("data-article-id"))})},aoColumnDefs:[{bSortable:!1,aTargets:["sorting_disabled"]}]}),t.btnAbodetailsSave.click(function(){})},t}();$(document).ready(function(){o.init()})},function(t,e){window.articledetailsComponent=function(){var t={};return t.init=function(){t.rootNode=$("#articledetails-index"),t.articleImage=t.rootNode.find("#article-image"),t.articleImageFileInput=t.rootNode.find("#article-image-file-input"),t.articletypesTable=t.rootNode.find("#articletypesTable"),t.articletypeDetailsModal=$("#articles-index").find("#articletypeDetailsModal"),t.btnArticletypeDetailsSave=t.articletypeDetailsModal.find("#btn-articletype-details-save"),t.btnArticletypeDetailsClose=t.articletypeDetailsModal.find("#btn-articletype-details-close"),t.articledetailsForm=t.rootNode.find("#articledetails-form"),t.price=t.rootNode.find("#price"),t.btnAddArticletype=t.rootNode.find("#btn-add-articletype"),this.rootNode.one("destroyed",function(){t.dispose()}),t.selectPrices=t.rootNode.find("#selectedPrices"),t.initBaseEndpoints(),t.initComponents()},t.dispose=function(){},t.initBaseEndpoints=function(){t.baseEndpointArticletypeDetails=function(e){window.overlay.show();var o="articletypedetails/"+e;$.get(o).success(t.articletypeDetailsLoad).fail(window.notify.ajaxError)}},t.articletypeDetailsLoad=function(e){t.articletypeDetailsModal.find(".modal-body").html(e),t.articletypeDetailsModal.modal("show"),window.overlay.hide()},t.initComponents=function(){t.articleImageFileInput.fileinput({language:"de",uploadAsync:!0,uploadUrl:"/api/imageupload",uploadExtraData:function(){return{articleId:t.articledetailsForm.attr("data-article-id")}}}),t.articleImageFileInput.on("fileuploaded",function(e,o,n,i){t.articleImageFileInput.fileinput("refresh").fileinput("enable")}),t.price.numeric(),t.selectPrices.selectpicker(),t.articletypesDataTable=t.articletypesTable.DataTable({pageLength:5,bFilter:!1,bLengthChange:!1,language:{url:"/js/vendor/i18n/datatables.de.json"},ajax:{url:"/api/articletypes/"+t.articledetailsForm.attr("data-article-id"),dataSrc:function(t){for(var e=new Array,o=0;o<t.length;o++)e.push([t[o].price,t[o].description,'<span class="glyphicon glyphicon-'+(t[o].isActive?"ok":"remove")+'" aria-hidden="true"></span>','<button type="button" data-articletype-id="'+t[o].id+'" class="btn btn-default btn-sm btn-action"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button>']);return e}},initComplete:function(e,o){t.articletypesTable.on("click",".btn-action",function(){t.baseEndpointArticletypeDetails($(this).attr("data-articletype-id"))})},aoColumnDefs:[{bSortable:!1,aTargets:["sorting_disabled"]}]}),t.btnArticletypeDetailsClose.click(function(){t.articletypeDetailsModal.modal("hide")}),t.btnAddArticletype.click(function(){t.baseEndpointArticletypeDetails(0)})},t}()},function(t,e){var o=function(){var t={};return t.rootNode=$("#admin-content").find("#articles-index"),t.articlesTable=t.rootNode.find("#articlesTable"),t.articleDetailsModal=t.rootNode.find("#articleDetailsModal"),t.articletypeDetailsModal=t.rootNode.find("#articletypeDetailsModal"),t.btnArticletypedetailsSave=t.articletypeDetailsModal.find("#btn-articletype-save"),t.btnArticledetailsSave=t.articleDetailsModal.find("#btn-articledetails-save"),t.init=function(){this.rootNode.one("destroyed",function(){t.dispose()}),t.initBaseEndpoints(),t.initComponents()},t.dispose=function(){},t.initBaseEndpoints=function(){t.baseEndpointArticleDetails=function(e){window.overlay.show();var o="articledetails/"+e;$.get(o).success(t.articleDetailsLoad).fail(window.notify.ajaxError)},t.baseEndpointArticleDetailsSave=function(e,o){window.overlay.show();var n="articledetails/"+e;$.post(n,o).success(t.articleDetailsSaved).fail(window.notify.ajaxError)},t.baseEndpointArticletypeDetailsSave=function(e,o,n){window.overlay.show();var i="articletypedetails/"+o+"/"+e;$.post(i,n).success(t.articletypeDetailsSaved).fail(window.notify.ajaxError)}},t.articleDetailsLoad=function(e){t.articleDetailsModal.find(".modal-body").html(e),t.articleDetailsModal.modal("show"),window.overlay.hide()},t.articleDetailsSaved=function(e){t.articleDetailsModal.modal("hide"),t.articlesDataTable.ajax.reload(),window.overlay.hide()},t.articletypeDetailsSaved=function(e){t.articletypeDetailsModal.modal("hide"),t.articleDetailsModal.find("#articletypesTable").DataTable().ajax.reload(),window.overlay.hide()},t.initComponents=function(){t.articlesDataTable=t.articlesTable.DataTable({bLengthChange:!1,language:{url:"/js/vendor/i18n/datatables.de.json"},ajax:{url:"/api/articles",dataSrc:function(t){for(var e=new Array,o=0;o<t.length;o++)e.push([t[o].name,t[o].description,'<img class="article--table--image" src="\\img\\articles\\'+t[o].imagepath+'" />','<button type="button" data-article-id="'+t[o].id+'" class="btn btn-default btn-sm btn-action"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button>']);return e}},initComplete:function(e,o){t.articlesTable.on("click",".btn-action",function(){t.baseEndpointArticleDetails($(this).attr("data-article-id"))})},aoColumnDefs:[{bSortable:!1,aTargets:["sorting_disabled"]}]}),t.btnArticletypedetailsSave.click(function(){var e=t.rootNode.find("#articledetails-index").find("#articledetails-form"),o=t.rootNode.find("#articletypedetails-index").find("#articletypedetails-form");t.baseEndpointArticletypeDetailsSave(o.attr("data-articletype-id"),e.attr("data-article-id"),o.serialize())}),t.btnArticledetailsSave.click(function(){var e=t.rootNode.find("#articledetails-index").find("#articledetails-form");t.baseEndpointArticleDetailsSave(e.attr("data-article-id"),e.serialize())})},t}();$(document).ready(function(){o.init()})},function(t,e){window.articletypeDetailsComponent=function(){var t={};return t.init=function(){t.rootNode=$("#articletypedetails-index"),t.articletypedetailsForm=t.rootNode.find("#articletypedetails-form"),t.price=t.rootNode.find("#price"),this.rootNode.one("destroyed",function(){t.dispose()}),t.initBaseEndpoints(),t.initComponents()},t.dispose=function(){},t.initBaseEndpoints=function(){},t.initComponents=function(){t.price.numeric()},t}()},function(t,e){var o=function(){var t={};return t.rootNode=$("#admin-content").find("#bills-index"),t.init=function(){this.rootNode.one("destroyed",function(){t.dispose()}),t.initBaseEndpoints(),t.initComponents()},t.dispose=function(){},t.initBaseEndpoints=function(){},t.initComponents=function(){},t}();$(document).ready(function(){o.init()})},function(t,e){var o=function(){var t={};return t.rootNode=$("#admin-content").find("#deliverynotes-index"),t.selectRegions=t.rootNode.find("#selectedRegions"),t.btnCreateDeliverynotes=t.rootNode.find("#btn-create-deliverynotes"),t.init=function(){this.rootNode.one("destroyed",function(){t.dispose()}),t.initBaseEndpoints(),t.initComponents()},t.dispose=function(){},t.initBaseEndpoints=function(){},t.initComponents=function(){t.selectRegions.selectpicker(),t.selectRegions.change(function(){null===$(this).val()?t.btnCreateDeliverynotes.prop("disabled",!0):t.btnCreateDeliverynotes.prop("disabled",!1)})},t}();$(document).ready(function(){o.init()})},function(t,e){window.userDetailsComponent=function(){var t={};return t.init=function(){t.rootNode=$("#userdetails-index"),t.userdetailsForm=t.rootNode.find("#userdetails-form"),t.abosTable=t.rootNode.find("#abosTable"),t.aboDetailsModal=$("#users-index").find("#aboDetailsModal"),t.btnAboDetailsSave=t.aboDetailsModal.find("#btn-abo-details-save"),t.btnAboDetailsClose=t.aboDetailsModal.find("#btn-abo-details-close"),t.btnAddAbo=t.rootNode.find("#btn-add-abo"),t.btnDeleteBreak=t.userdetailsForm.find("#btnDeleteBreak"),t.breakId=t.userdetailsForm.find("#breakId"),t.breakFrom=t.userdetailsForm.find("#breakFrom"),t.breakTo=t.userdetailsForm.find("#breakTo"),this.rootNode.one("destroyed",function(){t.dispose()}),t.initBaseEndpoints(),t.initComponents()},t.dispose=function(){},t.initBaseEndpoints=function(){t.baseEndpointAboDetails=function(e){window.overlay.show();var o="abodetails/"+e;$.get(o).success(t.aboDetailsLoad).fail(window.notify.ajaxError)}},t.aboDetailsLoad=function(e){t.aboDetailsModal.find(".modal-body").html(e),t.aboDetailsModal.modal("show"),window.overlay.hide()},t.initComponents=function(){t.abosDataTable=t.abosTable.DataTable({pageLength:4,bFilter:!1,bLengthChange:!1,language:{url:"/js/vendor/i18n/datatables.de.json"},ajax:{url:"/api/abos/"+t.userdetailsForm.attr("data-user-id"),dataSrc:function(t){for(var e=new Array,o=0;o<t.length;o++)e.push([t[o].articletype.article.name,moment(t[o].startdate.date).format("DD.MM.YYYY"),null!==t[o].articletype?t[o].articletype.price:0,t[o].credit,'<span class="glyphicon glyphicon-'+(null===t[o].enddate?"ok":moment(t[o].enddate.date).isAfter(moment().subtract(1,"d"))?"ok":"remove")+'" aria-hidden="true"></span>','<button type="button" data-abo-id="'+t[o].id+'" class="btn btn-default btn-sm btn-action"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button>']);return e}},initComplete:function(e,o){t.abosTable.on("click",".btn-action",function(){t.baseEndpointAboDetails($(this).attr("data-abo-id"))})},aoColumnDefs:[{bSortable:!1,aTargets:["sorting_disabled"]}]}),t.btnAboDetailsClose.click(function(){t.aboDetailsModal.modal("hide")}),t.btnAddAbo.click(function(){t.baseEndpointAboDetails(0)}),$(".input-group.date").datepicker({language:"de",calendarWeeks:!0,autoclose:!0,startDate:"dateToday"}),t.btnDeleteBreak.click(function(){t.btnDeleteBreak.attr("disabled","disabled"),t.breakId.attr("name","breakId"),t.breakFrom.val(""),t.breakTo.val("")})},t}()},function(t,e){var o=function(){var t={};return t.rootNode=$("#admin-content").find("#users-index"),t.usersTable=t.rootNode.find("#usersTable"),t.userDetailsModal=t.rootNode.find("#userDetailsModal"),t.btnUserdetailsSave=t.userDetailsModal.find("#btn-userdetails-save"),t.aboDetailsModal=t.rootNode.find("#aboDetailsModal"),t.btnAbodetailsSave=t.aboDetailsModal.find("#btn-abodetails-save"),t.init=function(){this.rootNode.one("destroyed",function(){t.dispose()}),t.initBaseEndpoints(),t.initComponents(),null!==$.urlParam("userId")&&t.baseEndpointUserDetails($.urlParam("userId"))},t.dispose=function(){},t.initBaseEndpoints=function(){t.baseEndpointUserDetails=function(e){window.overlay.show();var o="userdetails/"+e;$.get(o).success(t.userDetailsLoad).fail(window.notify.ajaxError)},t.baseEndpointUserDetailsSave=function(e,o){window.overlay.show();var n="userdetails/"+e;$.post(n,o).success(t.userDetailsSaved).fail(window.notify.ajaxError)},t.baseEndpointAboDetailsSave=function(e,o,n){window.overlay.show();var i="abodetails/"+o+"/"+e;$.post(i,n).success(t.aboDetailsSaved).fail(window.notify.ajaxError)}},t.userDetailsLoad=function(e){t.userDetailsModal.find(".modal-body").html(e),t.userDetailsModal.modal("show"),window.overlay.hide()},t.userDetailsSaved=function(e){t.userDetailsModal.modal("hide"),t.usersDataTable.ajax.reload(),window.overlay.hide()},t.aboDetailsSaved=function(e){t.aboDetailsModal.modal("hide"),t.userDetailsModal.find("#abosTable").DataTable().ajax.reload(),window.overlay.hide()},t.initComponents=function(){t.usersDataTable=t.usersTable.DataTable({bLengthChange:!1,pageLength:12,language:{url:"/js/vendor/i18n/datatables.de.json"},processing:!0,serverSide:!0,ajax:{url:"/api/users",dataSrc:function(t){for(var e=t.data,o=new Array,n=0;n<e.length;n++)o.push([null===e[n].billingAddress?e[n].username:e[n].billingAddress.name+", "+e[n].billingAddress.firstname+" ("+e[n].username+")",null===e[n].region?"":e[n].region.name,null===e[n].billingAddress?"":e[n].billingAddress.street,null===e[n].billingAddress?"":e[n].billingAddress.zip,null===e[n].billingAddress?"":e[n].billingAddress.town,'<span class="glyphicon glyphicon-'+(e[n].isActive?"ok":"remove")+'" aria-hidden="true"></span>','<button type="button" data-user-id="'+e[n].id+'" class="btn btn-default btn-sm btn-action"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button>']);return o},data:function(t){return{Top:t.length,Skip:t.start,Title:t.search.value,OrderBy:t.order[0].column,OrderByDesc:"asc"!==t.order[0].dir}}},initComplete:function(e,o){t.usersTable.on("click",".btn-action",function(){t.baseEndpointUserDetails($(this).attr("data-user-id"))});var n='<button type="button" class="btn btn-success btn-sm" style="margin-right:1em" id="btn-add-user">';n+='<span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Neuer Kunde',n+="</button>",t.rootNode.find(".dataTables_filter").prepend(n),t.btnAddUser=t.rootNode.find(".dataTables_filter").find("#btn-add-user"),t.btnAddUser.click(function(){t.baseEndpointUserDetails(0)})},aoColumnDefs:[{bSortable:!1,aTargets:["sorting_disabled"]}]}),t.btnUserdetailsSave.click(function(){var e=t.rootNode.find("#userdetails-index").find("#userdetails-form");t.baseEndpointUserDetailsSave(e.attr("data-user-id"),e.serialize())}),t.btnAbodetailsSave.click(function(){var e=t.rootNode.find("#userdetails-index").find("#userdetails-form"),o=t.rootNode.find("#abodetails-index").find("#abodetails-form");t.baseEndpointAboDetailsSave(o.attr("data-abo-id"),e.attr("data-user-id"),o.serialize())})},t}();$(document).ready(function(){o.init()})},function(t,e,o){o(4),o(3)},function(t,e){+function(t){"use strict";function e(e){return e.is('[type="checkbox"]')?e.prop("checked"):e.is('[type="radio"]')?!!t('[name="'+e.attr("name")+'"]:checked').length:e.is("select[multiple]")?(e.val()||[]).length:e.val()}function o(e){return this.each(function(){var o=t(this),i=t.extend({},n.DEFAULTS,o.data(),"object"==typeof e&&e),a=o.data("bs.validator");(a||"destroy"!=e)&&(a||o.data("bs.validator",a=new n(this,i)),"string"==typeof e&&a[e]())})}var n=function(o,i){this.options=i,this.validators=t.extend({},n.VALIDATORS,i.custom),this.$element=t(o),this.$btn=t('button[type="submit"], input[type="submit"]').filter('[form="'+this.$element.attr("id")+'"]').add(this.$element.find('input[type="submit"], button[type="submit"]')),this.update(),this.$element.on("input.bs.validator change.bs.validator focusout.bs.validator",t.proxy(this.onInput,this)),this.$element.on("submit.bs.validator",t.proxy(this.onSubmit,this)),this.$element.on("reset.bs.validator",t.proxy(this.reset,this)),this.$element.find("[data-match]").each(function(){var o=t(this),n=o.attr("data-match");t(n).on("input.bs.validator",function(t){e(o)&&o.trigger("input.bs.validator")})}),this.$inputs.filter(function(){return e(t(this))&&!t(this).closest(".has-error").length}).trigger("focusout"),this.$element.attr("novalidate",!0)};n.VERSION="0.11.9",n.INPUT_SELECTOR=':input:not([type="hidden"], [type="submit"], [type="reset"], button)',n.FOCUS_OFFSET=20,n.DEFAULTS={delay:500,html:!1,disable:!0,focus:!0,custom:{},errors:{match:"Does not match",minlength:"Not long enough"},feedback:{success:"glyphicon-ok",error:"glyphicon-remove"}},n.VALIDATORS={native:function(t){var e=t[0];if(e.checkValidity)return!e.checkValidity()&&!e.validity.valid&&(e.validationMessage||"error!")},match:function(e){var o=e.attr("data-match");return e.val()!==t(o).val()&&n.DEFAULTS.errors.match},minlength:function(t){var e=t.attr("data-minlength");return t.val().length<e&&n.DEFAULTS.errors.minlength}},n.prototype.update=function(){var e=this;return this.$inputs=this.$element.find(n.INPUT_SELECTOR).add(this.$element.find('[data-validate="true"]')).not(this.$element.find('[data-validate="false"]').each(function(){e.clearErrors(t(this))})),this.toggleSubmit(),this},n.prototype.onInput=function(e){var o=this,n=t(e.target),i="focusout"!==e.type;this.$inputs.is(n)&&this.validateInput(n,i).done(function(){o.toggleSubmit()})},n.prototype.validateInput=function(o,n){var i=(e(o),o.data("bs.validator.errors"));o.is('[type="radio"]')&&(o=this.$element.find('input[name="'+o.attr("name")+'"]'));var a=t.Event("validate.bs.validator",{relatedTarget:o[0]});if(this.$element.trigger(a),!a.isDefaultPrevented()){var r=this;return this.runValidators(o).done(function(e){o.data("bs.validator.errors",e),e.length?n?r.defer(o,r.showErrors):r.showErrors(o):r.clearErrors(o),i&&e.toString()===i.toString()||(a=e.length?t.Event("invalid.bs.validator",{relatedTarget:o[0],detail:e}):t.Event("valid.bs.validator",{relatedTarget:o[0],detail:i}),r.$element.trigger(a)),r.toggleSubmit(),r.$element.trigger(t.Event("validated.bs.validator",{relatedTarget:o[0]}))})}},n.prototype.runValidators=function(o){function n(t){return o.attr("data-"+t+"-error")}function i(){var t=o[0].validity;return t.typeMismatch?o.attr("data-type-error"):t.patternMismatch?o.attr("data-pattern-error"):t.stepMismatch?o.attr("data-step-error"):t.rangeOverflow?o.attr("data-max-error"):t.rangeUnderflow?o.attr("data-min-error"):t.valueMissing?o.attr("data-required-error"):null}function a(){return o.attr("data-error")}function r(t){return n(t)||i()||a()}var s=[],d=t.Deferred();return o.data("bs.validator.deferred")&&o.data("bs.validator.deferred").reject(),o.data("bs.validator.deferred",d),t.each(this.validators,t.proxy(function(t,n){var i=null;!e(o)&&!o.attr("required")||void 0===o.attr("data-"+t)&&"native"!=t||!(i=n.call(this,o))||(i=r(t)||i,!~s.indexOf(i)&&s.push(i))},this)),!s.length&&e(o)&&o.attr("data-remote")?this.defer(o,function(){var n={};n[o.attr("name")]=e(o),t.get(o.attr("data-remote"),n).fail(function(t,e,o){s.push(r("remote")||o)}).always(function(){d.resolve(s)})}):d.resolve(s),d.promise()},n.prototype.validate=function(){var e=this;return t.when(this.$inputs.map(function(o){return e.validateInput(t(this),!1)})).then(function(){e.toggleSubmit(),e.focusError()}),this},n.prototype.focusError=function(){if(this.options.focus){var e=this.$element.find(".has-error :input:first");0!==e.length&&(t("html, body").animate({scrollTop:e.offset().top-n.FOCUS_OFFSET},250),e.focus())}},n.prototype.showErrors=function(e){var o=this.options.html?"html":"text",n=e.data("bs.validator.errors"),i=e.closest(".form-group"),a=i.find(".help-block.with-errors"),r=i.find(".form-control-feedback");n.length&&(n=t("<ul/>").addClass("list-unstyled").append(t.map(n,function(e){return t("<li/>")[o](e)})),void 0===a.data("bs.validator.originalContent")&&a.data("bs.validator.originalContent",a.html()),a.empty().append(n),i.addClass("has-error has-danger"),i.hasClass("has-feedback")&&r.removeClass(this.options.feedback.success)&&r.addClass(this.options.feedback.error)&&i.removeClass("has-success"))},n.prototype.clearErrors=function(t){var o=t.closest(".form-group"),n=o.find(".help-block.with-errors"),i=o.find(".form-control-feedback");n.html(n.data("bs.validator.originalContent")),o.removeClass("has-error has-danger has-success"),o.hasClass("has-feedback")&&i.removeClass(this.options.feedback.error)&&i.removeClass(this.options.feedback.success)&&e(t)&&i.addClass(this.options.feedback.success)&&o.addClass("has-success")},n.prototype.hasErrors=function(){function e(){return!!(t(this).data("bs.validator.errors")||[]).length}return!!this.$inputs.filter(e).length},n.prototype.isIncomplete=function(){function o(){var o=e(t(this));return!("string"==typeof o?t.trim(o):o)}return!!this.$inputs.filter("[required]").filter(o).length},n.prototype.onSubmit=function(t){this.validate(),(this.isIncomplete()||this.hasErrors())&&t.preventDefault()},n.prototype.toggleSubmit=function(){this.options.disable&&this.$btn.toggleClass("disabled",this.isIncomplete()||this.hasErrors())},n.prototype.defer=function(e,o){if(o=t.proxy(o,this,e),!this.options.delay)return o();window.clearTimeout(e.data("bs.validator.timeout")),e.data("bs.validator.timeout",window.setTimeout(o,this.options.delay))},n.prototype.reset=function(){return this.$element.find(".form-control-feedback").removeClass(this.options.feedback.error).removeClass(this.options.feedback.success),this.$inputs.removeData(["bs.validator.errors","bs.validator.deferred"]).each(function(){var e=t(this),o=e.data("bs.validator.timeout");window.clearTimeout(o)&&e.removeData("bs.validator.timeout")}),this.$element.find(".help-block.with-errors").each(function(){var e=t(this),o=e.data("bs.validator.originalContent");e.removeData("bs.validator.originalContent").html(o)}),this.$btn.removeClass("disabled"),this.$element.find(".has-error, .has-danger, .has-success").removeClass("has-error has-danger has-success"),this},n.prototype.destroy=function(){return this.reset(),this.$element.removeAttr("novalidate").removeData("bs.validator").off(".bs.validator"),this.$inputs.off(".bs.validator"),this.options=null,this.validators=null,this.$element=null,this.$btn=null,this.$inputs=null,this};var i=t.fn.validator;t.fn.validator=o,t.fn.validator.Constructor=n,t.fn.validator.noConflict=function(){return t.fn.validator=i,this},t(window).on("load",function(){t('form[data-toggle="validator"]').each(function(){var e=t(this);o.call(e,e.data())})})}(jQuery)},function(t,e){var o=function(){var t={};return t.rootNode=$("#login-nav"),t.loginError=t.rootNode.find("#loginError"),t.init=function(){this.rootNode.one("destroyed",function(){t.dispose()}),t.initBaseEndpoints(),t.initComponents()},t.dispose=function(){},t.initBaseEndpoints=function(){t.baseEndpointLogin=function(e){window.overlay.show();$.post("/login",e).success(t.loginSuccess).fail(window.notify.ajaxError)}},t.loginSuccess=function(e){void 0!==e.user?(t.loginError.hide(),"/register"==window.location.pathname?window.location.href="/":location.reload()):t.loginError.show(),window.overlay.hide()},t.initComponents=function(){t.rootNode.submit(function(e){e.preventDefault(),t.baseEndpointLogin(t.rootNode.serialize())})},t}();$(document).ready(function(){o.init()})},function(t,e){var o=function(){var t={};return t.rootNode=$("#site-content").find("#abodetails-index"),t.orderAboForm=t.rootNode.find("#orderAboForm"),t.btnOrderAbo=t.orderAboForm.find("#btnOrderAbo"),t.orderAboModal=t.rootNode.find("#orderAboModal"),t.btnOrdnerAboSubmitForm=t.orderAboModal.find("button.btn-success"),t.hasSet=!1,t.init=function(){this.rootNode.one("destroyed",function(){t.dispose()}),t.initBaseEndpoints(),t.initComponents()},t.dispose=function(){},t.initBaseEndpoints=function(){t.baseEndpointOrderAboSubmit=function(e){window.overlay.show();$.post("../api/create/abo",e).success(t.orderAboSubmitLoad).fail(window.notify.ajaxError)},t.baseEndpointCheckout=function(){window.overlay.show();$.get("/checkout").success(t.checkoutLoad).fail(window.notify.ajaxError)},t.baseEndpointUpdateAddresses=function(e){window.overlay.show();$.post("../api/update/addresses",e).success(t.updateAddressesLoad).fail(window.notify.ajaxError)},t.baseEndpointRegister=function(e){window.overlay.show();$.post("/registration",e).success(t.registerSuccess).fail(window.notify.ajaxError)}},t.checkoutLoad=function(e){t.orderAboModal.find(".modal-body").html(e),t.orderAboModal.find("#plzA").numeric(),t.orderAboModal.find("#plzB").numeric(),t.orderAboModal.modal("show");var o=t.orderAboModal.find("#hasShippingAddress"),n=t.orderAboModal.find("#shippingAddressArea");o.click(function(){$(this).is(":checked")?n.removeClass("hidden"):n.addClass("hidden")}),0==t.hasSet&&(t.btnOrdnerAboSubmitForm.click(function(){if(t.orderAboModal.find("#createUserPart").length>0){var e=t.orderAboModal.find("#register-form");t.baseEndpointRegister(e.serialize()),window.overlay.hide()}else{var o=t.orderAboModal.find("#orderAboSubmitForm");t.baseEndpointUpdateAddresses(o.serialize())}}),t.hasSet=!0),window.overlay.hide()},t.updateAddressesLoad=function(e){t.baseEndpointOrderAboSubmit(t.orderAboForm.serialize())},t.registerSuccess=function(e){window.notify.info(e.answer);var o=t.orderAboModal.find("#createUserPart");o.hide(),o.remove();var n=t.orderAboModal.find("#orderAboSubmitForm");t.baseEndpointUpdateAddresses(n.serialize())},t.orderAboSubmitLoad=function(e){window.overlay.hide(),t.orderAboModal.modal("hide"),window.notify.info(e.answer),window.setTimeout(function(){window.location.href="/myabos"},3e3)},t.initComponents=function(){$(".input-group.date").datepicker({language:"de",calendarWeeks:!0,autoclose:!0,startDate:"dateToday"}),$(".input-group.date").datepicker("update",new Date),t.orderAboForm.validator(),t.btnOrderAbo.click(function(){""!=$(".input-group.date input").val()&&t.baseEndpointCheckout()})},t}();$(document).ready(function(){o.init()})},function(t,e){var o=function(){var t={};return t.rootNode=$("#site-content").find("#pause-index"),t.breakForm=t.rootNode.find("#breakForm"),t.breakFormSubmit=t.breakForm.find("button"),t.removeBreakButton=t.rootNode.find("#deleteBreakButton"),t.init=function(){this.rootNode.one("destroyed",function(){t.dispose()}),t.initBaseEndpoints(),t.initComponents()},t.dispose=function(){},t.initBaseEndpoints=function(){t.baseEndpointCreatePause=function(e){window.overlay.show();$.post("/api/create/pause",e).success(t.breakcreateLoad).fail(window.notify.ajaxError)},t.removePauseEndpoint=function(e){window.overlay.show();var o="/api/delete/pause/"+e;$.get(o).success(t.breakdeletedLoad).fail(window.notify.ajaxError)}},t.breakcreateLoad=function(t){window.notify.info(t.response),setTimeout(location.reload.bind(location),3e3)},t.breakdeletedLoad=function(t){window.notify.info(t.response),setTimeout(location.reload.bind(location),3e3)},t.initComponents=function(){t.breakFormSubmit.click(function(e){t.baseEndpointCreatePause(t.breakForm.serialize())}),t.removeBreakButton.click(function(e){t.removePauseEndpoint($(this).data("breakid"))})},t}();$(document).ready(function(){o.init()})},function(t,e){var o=function(){var t={};return t.rootNode=$("#site-content").find("#checkout-index"),t.init=function(){this.rootNode.one("destroyed",function(){t.dispose()}),t.initBaseEndpoints(),t.initComponents()},t.dispose=function(){},t.initBaseEndpoints=function(){},t.initComponents=function(){},t}();$(document).ready(function(){o.init()})},function(t,e){var o=function(){var t={};return t.rootNode=$("#site-content").find("#contact-index"),t.contactForm=t.rootNode.find("#formContact"),t.init=function(){this.rootNode.one("destroyed",function(){t.dispose()}),t.initBaseEndpoints(),t.initComponents()},t.dispose=function(){},t.initBaseEndpoints=function(){t.baseEndpointSendContact=function(e){window.overlay.show();$.post("/api/contact",e).success(t.sendContactSuccess).fail(window.notify.ajaxError)}},t.sendContactSuccess=function(e){window.notify.info(e.message),t.contactForm.find("input").prop("disabled",!0),t.contactForm.find("textarea").prop("disabled",!0),window.overlay.hide()},t.initComponents=function(){t.contactForm.submit(function(e){e.preventDefault(),t.baseEndpointSendContact(t.contactForm.serialize())})},t}();$(document).ready(function(){o.init()})},function(t,e){var o=function(){var t={};return t.rootNode=$("#site-content").find("#forgotpassword-index"),t.resetForm=t.rootNode.find("#resetForm"),t.resetEmail=t.resetForm.find("#resetEmail"),t.resetButton=t.resetForm.find("#resetButton"),t.resetSuccess=t.resetForm.find("#resetSuccess"),t.setForm=t.rootNode.find("#setForm"),t.setPassword=t.setForm.find("#setPassword"),t.setPasswordConfirm=t.setForm.find("#setPasswordConfirm"),t.setButton=t.setForm.find("#setButton"),t.setError=t.setForm.find("#setError"),t.init=function(){this.rootNode.one("destroyed",function(){t.dispose()}),t.initBaseEndpoints(),t.initComponents()},t.dispose=function(){},t.initBaseEndpoints=function(){t.baseEndpointResetPassword=function(e){window.overlay.show();$.post("/resetpassword",e).success(t.resetPasswordSuccess).fail(window.notify.ajaxError)},t.baseEndpointSetPassword=function(e){window.overlay.show();$.post("/setpassword",e).success(t.setPasswordSuccess).fail(window.notify.ajaxError)}},t.resetPasswordSuccess=function(e){t.resetButton.hide(),t.resetSuccess.show(),t.resetEmail.prop("readonly",!0),window.overlay.hide()},t.setPasswordSuccess=function(e){void 0!==e.user?(t.setError.hide(),"/register"==window.location.pathname?window.location.href="/":location.reload()):t.setError.show(),window.overlay.hide()},t.initComponents=function(){t.resetForm.submit(function(e){e.preventDefault(),t.baseEndpointResetPassword(t.resetForm.serialize())}),t.setForm.submit(function(e){e.preventDefault(),t.baseEndpointSetPassword(t.setForm.serialize())})},t}();$(document).ready(function(){o.init()})},function(t,e){var o=function(){var t={};return t.rootNode=$("#site-content").find("#homepage-index"),t.init=function(){this.rootNode.one("destroyed",function(){t.dispose()}),t.initBaseEndpoints(),t.initComponents()},t.dispose=function(){},t.initBaseEndpoints=function(){},t.initComponents=function(){},t}();$(document).ready(function(){o.init()})},function(t,e){var o=function(){var t={};return t.rootNode=$("#site-content").find("#myabodetail-index"),t.updateAboForm=t.rootNode.find("#updateAboForm"),t.btnSaveAbo=t.updateAboForm.find("#btnSaveAbo"),t.init=function(){this.rootNode.one("destroyed",function(){t.dispose()}),t.initBaseEndpoints(),t.initComponents()},t.dispose=function(){},t.initBaseEndpoints=function(){t.baseEndpointMyAboUpdate=function(e){window.overlay.show();$.post("/api/update/abo",e).success(t.myAboUpdated).fail(window.notify.ajaxError),window.overlay.hide()}},t.myAboUpdated=function(t){window.notify.info(t.answer)},t.initComponents=function(){t.btnSaveAbo.click(function(){t.baseEndpointMyAboUpdate(t.updateAboForm.serialize())})},t}();$(document).ready(function(){o.init()})},function(t,e){var o=function(){var t={};return t.rootNode=$("#site-content").find("#myabos"),t.editAboModal=t.rootNode.find("#editAboModal"),t.saveAboChangesButton=t.editAboModal.find("button.btn-success"),t.quitAboModal=t.rootNode.find("#quitAboModal"),t.quitAboButton=t.quitAboModal.find("button.btn-success"),t.aboTable=t.rootNode.find("#articlesTable"),t.init=function(){this.rootNode.one("destroyed",function(){t.dispose()}),t.initBaseEndpoints(),t.initComponents()},t.dispose=function(){},t.initBaseEndpoints=function(){t.baseEndpointMyAboUpdate=function(e){window.overlay.show();$.post("../api/update/abo",e).success(t.updateaboLoad).fail(window.notify.ajaxError)},t.baseEndpointMyAboQuit=function(e){window.overlay.show();$.post("../api/quit/abo",e).success(t.quitaboLoad).fail(window.notify.ajaxError)},t.baseEndpointGetEditAboForm=function(e){window.overlay.show();var o="../myabos/abo/"+e;$.get(o).success(t.updateabomodalLoad).fail(window.notify.ajaxError)}},t.updateabomodalLoad=function(e){t.editAboModal.find(".modal-body").html(e),t.editAboModal.modal("show"),window.overlay.hide()},t.updateaboLoad=function(e){window.overlay.hide(),t.editAboModal.modal("hide"),window.notify.info(e.answer),t.aboDataTable.ajax.reload()},t.quitabomodalLoad=function(e,o){t.quitAboModal.find("#aboEndDate").val(""),t.quitAboModal.find("#quitReason").val(""),t.quitAboModal.find("#aboId").val(e),t.quitAboModal.find("#deleteAboModalTitle").text(o),t.quitAboModal.modal("show")},t.quitaboLoad=function(e){window.overlay.hide(),t.quitAboModal.modal("hide"),window.notify.info(e.answer),t.aboDataTable.ajax.reload()},t.initComponents=function(){t.saveAboChangesButton.click(function(){var e=t.editAboModal.find("form");t.baseEndpointMyAboUpdate(e.serialize())}),t.quitAboButton.click(function(){var e=t.quitAboModal.find("form");t.baseEndpointMyAboQuit(e.serialize())}),t.aboDataTable=t.aboTable.DataTable({bLengthChange:!1,language:{url:"/js/vendor/i18n/datatables.de.json"},ajax:{url:"/api/abos/"+t.aboTable.attr("data-user-id"),dataSrc:function(t){for(var e=new Array,o=0;o<t.length;o++)e.push([t[o].articletype.article.name+(null===t[o].enddate?"":' <span style="font-style:italic;">(Abo wurde per '+moment(t[o].enddate.date).format("DD.MM.YYYY")+" gekündet)</span>"),moment(t[o].startdate.date).format("DD.MM.YYYY"),null!==t[o].articletype.price?t[o].articletype.price:0,'<span class="glyphicon glyphicon-'+(null===t[o].enddate?"ok":moment(t[o].enddate.date).isAfter(moment().subtract(1,"d"))?"ok":"remove")+'" aria-hidden="true"></span>','<button type="button" data-aboid="'+t[o].id+'" class="btn btn-default btn-sm btn-action viki-editabo-btn" '+(null===t[o].enddate?"":"disabled")+'><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button> <button type="button" data-aboid="'+t[o].id+'" data-aboname="'+t[o].articletype.article.name+'" class="btn btn-default btn-sm btn-action viki-quitabo-btn" '+(null===t[o].enddate?"":"disabled")+'><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>']);return e}},createdRow:function(t,e,o){$(t).find("td:last-child").find("button:disabled").length>0&&$(t).addClass("danger")},initComplete:function(e,o){t.aboTable.on("click",".viki-editabo-btn",function(){t.baseEndpointGetEditAboForm($(this).data("aboid"))}),t.aboTable.on("click",".viki-quitabo-btn",function(){t.quitabomodalLoad($(this).data("aboid"),$(this).data("aboname"))})},aoColumnDefs:[{bSortable:!1,aTargets:["sorting_disabled"]}]})},t}();$(document).ready(function(){o.init()})},function(t,e){var o=function(){var t={};return t.rootNode=$("#site-content").find("#myprofile"),t.addressesForm=t.rootNode.find("#addressesForm"),t.shippingAddressCheckbox=t.addressesForm.find("#hasShippingAddress"),t.shippingAddressArea=t.addressesForm.find("#shippingAddressArea"),t.addressesFormSaveButton=t.addressesForm.find("button.btn-primary"),t.zipaInput=t.addressesForm.find("#plzA"),t.zipbInput=t.addressesForm.find("#plzB"),t.init=function(){this.rootNode.one("destroyed",function(){t.dispose()}),t.initBaseEndpoints(),t.initComponents()},t.dispose=function(){},t.initBaseEndpoints=function(){t.baseEndpointUpdateAddresses=function(e){window.overlay.show();$.post("../api/update/addresses",e).success(t.updateaddressesLoad).fail(window.notify.ajaxError)}},t.updateaddressesLoad=function(t){window.overlay.hide(),window.notify.info(t.answer)},t.initComponents=function(){t.shippingAddressCheckbox.click(function(){$(this).is(":checked")?t.shippingAddressArea.removeClass("hidden"):t.shippingAddressArea.addClass("hidden")}),t.addressesFormSaveButton.click(function(){t.baseEndpointUpdateAddresses($("#addressesForm").serialize())}),t.zipaInput.numeric(),t.zipbInput.numeric()},t}();$(document).ready(function(){o.init()})},function(t,e){var o=function(){var t={};return t.rootNode=$("#site-content").find("#register-index"),t.registerForm=$("#site-content").find("#register-form"),t.init=function(){this.rootNode.one("destroyed",function(){t.dispose()}),t.initBaseEndpoints(),t.initComponents()},t.dispose=function(){},t.initBaseEndpoints=function(){t.baseEndpointRegister=function(e){window.overlay.show();$.post("/registration",e).success(t.registerSuccess).fail(window.notify.ajaxError)}},t.registerSuccess=function(t){window.location.href="/"},t.initComponents=function(){t.registerForm.submit(function(e){e.preventDefault(),t.baseEndpointRegister(t.registerForm.serialize())})},t}();$(document).ready(function(){o.init()})}]);